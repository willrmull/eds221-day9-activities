---
title: "reprex"
author: "Allison Horst"
date: "8/19/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(janitor)
```

Your job is to identify an error, then make a reproducible example that would help future you or someone else understand how to write the code correctly. In other words, your reprex code will *work* and offer a solution to the error thrown in each of the following examples. 

Data are in `AS00601.csv` (and read in correctly below as `mack_creek_vertebrates`). 

Data package title: Aquatic Vertebrate Population Study in Mack Creek, Andrews Experimental Forest, 1987 to present

**Citation:** Gregory, S.V. and I. Arismendi. 2020. Aquatic Vertebrate Population Study in Mack Creek, Andrews Experimental Forest, 1987 to present ver 14. Environmental Data Initiative. https://doi.org/10.6073/pasta/7c78d662e847cdbe33584add8f809165

### Read in the data 

There are no problems here. 
```{r}
mack_creek_vertebrates <- read_csv(here("AS00601.csv"))
```

### reprex 1

Identify what is causing the problem in the code below (there's only one thing). Then, create a very simple reprex that would help yourself, future you, or a colleague fix the problem. **Post your reprex as an issue in your own fork on GitHub.**

```{r}
mack_creek_lengths <- mack_creek_vertebrates %>% 
  clean_names() %>% 
  select(year:sampledate) %>% 
  filter(section == "CC") %>% 
  mutate(across(where(is.character), ~tolower(.x))) %>% 
  drop_na(species) %>% 
  group_by(species) %>% 
  summarize(mean_length_cm = mean(length1, na.rm = TRUE),
            sd_length_cm = sd(length1, na.rm = TRUE)) %>% 
  ungroup()

```

```{r}
reprex::reprex({
library(tidyverse)
library(janitor)

mack_creek_vertebrates_subset <- data.frame(
  stringsAsFactors = FALSE,
            DBCODE = c("AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006"),
            ENTITY = c(1,1,1,1,1,1,1,1,1,1,1,
                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
                       1,1,1),
              YEAR = c(1993,1993,1993,1993,1993,
                       1993,1993,1993,1993,1993,1987,1987,1987,1987,1987,
                       1987,1987,1987,1987,1987,1994,1994,2002,2003,
                       2003,2003,2004,2012,2012,2012,1990,1995,1995),
          SITECODE = c("MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKOG-U",
                       "MACKCC-L","MACKCC-L","MACKOG-U","MACKOG-U","MACKCC-L",
                       "MACKCC-M","MACKOG-M"),
           SECTION = c("CC","CC","CC","CC","CC",
                       "CC","CC","CC","CC","CC","CC","CC","CC","CC","CC",
                       "CC","CC","CC","CC","CC","CC","CC","CC","CC",
                       "CC","OG","CC","CC","OG","OG","CC","CC","OG"),
             REACH = c("L","L","L","L","L","L",
                       "L","L","L","L","L","L","L","L","L","L","L","L",
                       "L","L","L","L","L","L","L","U","L","L","U",
                       "U","L","M","M"),
              PASS = c(1,1,1,1,1,1,1,1,1,1,1,
                       1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,
                       1,1,1),
           UNITNUM = c(1,2,2,2,2,2,2,2,2,2,1,
                       1,1,1,1,1,1,1,1,1,3,3,2,2,2,18,2,2,16,
                       16,3,9,10),
          UNITTYPE = c("P","C","C","C","C","C",
                       "C","C","C","C","R","R","R","R","R","R","R","R",
                       "R","R","SC","SC","SC","SC","SC","P","SC","SC",
                       "SC","SC","SC","SC","S"),
        VERT_INDEX = c(16,36,37,38,39,40,41,42,
                       43,44,1,2,3,4,5,6,7,8,9,10,20,21,13,48,
                       20,21,33,49,1,2,1,1,1),
         PITNUMBER = c(NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA),
           SPECIES = c("DITE","DITE","DITE","DITE",
                       "DITE","DITE","DITE","DITE","DITE","DITE","ONCL",
                       "ONCL","ONCL","ONCL","ONCL","ONCL","ONCL","ONCL",
                       "ONCL","ONCL","RHOL","RHOL","RHOL","RHOL","RHOL",
                       "RHOL","RHOL","RHOL","RHOL","RHOL",NA,NA,NA),
           LENGTH1 = c(72,85,61,42,61,81,55,70,
                       69,25,58,61,89,58,93,86,107,131,103,117,40,
                       32,35,33,39,42,42,39,39,26,NA,NA,NA),
           LENGTH2 = c(72,149,114,84,114,147,96,
                       121,126,47,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,72,
                       55,59,55,68,75,73,70,61,47,NA,NA,NA),
            WEIGHT = c(16.13,22.99,1.35,3.18,10.26,
                       19.51,6.31,13.33,12.96,0.75,1.75,1.95,5.6,2.15,
                       6.9,5.9,10.5,20.6,9.55,13,1.95,0.94,NA,NA,NA,
                       NA,NA,1.6,1.2,0.5,NA,NA,NA),
              CLIP = c("NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE"),
        SAMPLEDATE = c("9/1/93","9/1/93","9/1/93",
                       "9/1/93","9/1/93","9/1/93","9/1/93","9/1/93","9/1/93",
                       "9/1/93","10/7/87","10/7/87","10/7/87","10/7/87",
                       "10/7/87","10/7/87","10/7/87","10/7/87","10/7/87",
                       "10/7/87","8/30/94","8/30/94","8/26/02","9/2/03",
                       "9/2/03","9/3/03","9/2/04","9/4/12","9/7/12","9/7/12",
                       "8/15/90","8/30/95","8/29/95"),
             NOTES = c(NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,"not sampled","DRY",
                       "JAM")
)

mack_creek_lengths <- mack_creek_vertebrates_subset %>% 
  clean_names() %>% 
  select(year:sampledate) %>% 
  filter(section == "CC") %>% 
  mutate(across(where(is.character), ~tolower(.x))) %>% 
  drop_na(species) %>% 
  group_by(species) %>% 
  summarize(mean_length_cm = mean(length1, na.rm = TRUE),
            sd_length_cm = sd(length1, na.rm = TRUE)) %>% 
  ungroup()
})
```


### reprex 2

Identify what is causing the problem in the code below (there's only one thing). Then, create a very simple reprex that would help yourself, future you, or a colleague fix the problem. **Post your reprex as an issue in your own fork on GitHub.**

```{r}
# Example 2:
mack_creek_vertebrates %>% 
  clean_names() %>% 
  filter(species == "ONCL") %>% 
  ggplot(aes(x = length1, y = weight)) +
         geom_point(aes(shape = "12"), color = "purple") +
         theme_minimal() +
         labs(x = "Cutthroat trout length (cm)",
              y = "Weight (g)")
```


```{r}
reprex::reprex({
library(tidyverse)
library(janitor)

mack_creek_vertebrates_subset <- data.frame(
  stringsAsFactors = FALSE,
            DBCODE = c("AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006","AS006","AS006","AS006",
                       "AS006","AS006","AS006","AS006"),
            ENTITY = c(1,1,1,1,1,1,1,1,1,1,1,
                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
                       1,1,1),
              YEAR = c(1993,1993,1993,1993,1993,
                       1993,1993,1993,1993,1993,1987,1987,1987,1987,1987,
                       1987,1987,1987,1987,1987,1994,1994,2002,2003,
                       2003,2003,2004,2012,2012,2012,1990,1995,1995),
          SITECODE = c("MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L",
                       "MACKCC-L","MACKCC-L","MACKCC-L","MACKCC-L","MACKOG-U",
                       "MACKCC-L","MACKCC-L","MACKOG-U","MACKOG-U","MACKCC-L",
                       "MACKCC-M","MACKOG-M"),
           SECTION = c("CC","CC","CC","CC","CC",
                       "CC","CC","CC","CC","CC","CC","CC","CC","CC","CC",
                       "CC","CC","CC","CC","CC","CC","CC","CC","CC",
                       "CC","OG","CC","CC","OG","OG","CC","CC","OG"),
             REACH = c("L","L","L","L","L","L",
                       "L","L","L","L","L","L","L","L","L","L","L","L",
                       "L","L","L","L","L","L","L","U","L","L","U",
                       "U","L","M","M"),
              PASS = c(1,1,1,1,1,1,1,1,1,1,1,
                       1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,
                       1,1,1),
           UNITNUM = c(1,2,2,2,2,2,2,2,2,2,1,
                       1,1,1,1,1,1,1,1,1,3,3,2,2,2,18,2,2,16,
                       16,3,9,10),
          UNITTYPE = c("P","C","C","C","C","C",
                       "C","C","C","C","R","R","R","R","R","R","R","R",
                       "R","R","SC","SC","SC","SC","SC","P","SC","SC",
                       "SC","SC","SC","SC","S"),
        VERT_INDEX = c(16,36,37,38,39,40,41,42,
                       43,44,1,2,3,4,5,6,7,8,9,10,20,21,13,48,
                       20,21,33,49,1,2,1,1,1),
         PITNUMBER = c(NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA),
           SPECIES = c("DITE","DITE","DITE","DITE",
                       "DITE","DITE","DITE","DITE","DITE","DITE","ONCL",
                       "ONCL","ONCL","ONCL","ONCL","ONCL","ONCL","ONCL",
                       "ONCL","ONCL","RHOL","RHOL","RHOL","RHOL","RHOL",
                       "RHOL","RHOL","RHOL","RHOL","RHOL",NA,NA,NA),
           LENGTH1 = c(72,85,61,42,61,81,55,70,
                       69,25,58,61,89,58,93,86,107,131,103,117,40,
                       32,35,33,39,42,42,39,39,26,NA,NA,NA),
           LENGTH2 = c(72,149,114,84,114,147,96,
                       121,126,47,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,72,
                       55,59,55,68,75,73,70,61,47,NA,NA,NA),
            WEIGHT = c(16.13,22.99,1.35,3.18,10.26,
                       19.51,6.31,13.33,12.96,0.75,1.75,1.95,5.6,2.15,
                       6.9,5.9,10.5,20.6,9.55,13,1.95,0.94,NA,NA,NA,
                       NA,NA,1.6,1.2,0.5,NA,NA,NA),
              CLIP = c("NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE","NONE","NONE","NONE","NONE","NONE","NONE",
                       "NONE"),
        SAMPLEDATE = c("9/1/93","9/1/93","9/1/93",
                       "9/1/93","9/1/93","9/1/93","9/1/93","9/1/93","9/1/93",
                       "9/1/93","10/7/87","10/7/87","10/7/87","10/7/87",
                       "10/7/87","10/7/87","10/7/87","10/7/87","10/7/87",
                       "10/7/87","8/30/94","8/30/94","8/26/02","9/2/03",
                       "9/2/03","9/3/03","9/2/04","9/4/12","9/7/12","9/7/12",
                       "8/15/90","8/30/95","8/29/95"),
             NOTES = c(NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,
                       NA,NA,NA,NA,NA,NA,NA,NA,"not sampled","DRY",
                       "JAM"))
  
  mack_creek_vertebrates_subset %>% 
  clean_names() %>% 
  filter(species == "ONCL") %>% 
  ggplot(aes(x = length1, y = weight)) +
         geom_point(aes(shape = "12"), color = "purple") +
         theme_minimal() +
         labs(x = "Cutthroat trout length (cm)",
              y = "Weight (g)")
})
```

## End